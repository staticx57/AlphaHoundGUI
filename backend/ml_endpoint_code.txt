# ===== ML IDENTIFICATION (PyRIID) =====
from ml_identifier import get_ml_identifier

class MLIdentifyRequest(BaseModel):
    counts: list

@router.post("/analyze/ml-identify")
async def ml_identify(request: MLIdentifyRequest):
    """Machine Learning isotope identification using PyRIID"""
    try:
        ml = get_ml_identifier()
        if ml is None:
            raise HTTPException(status_code=501, detail="PyRIID not installed")
        results = ml.identify(request.counts, top_k=5)
        return {"predictions": results}
    except Exception as e:
        print(f"[ML] Error: {e}")
        raise HTTPException(status_code=500, detail=str(e))
